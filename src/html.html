<div id="diy-container">
    <div class="info-panel">
        <!-- Top panel with position and controls -->
        <div class="flex-between">
            <p id="currentPos">ROV: </p>
            <div class="d-flex">
                <button id="clearTrail" class="v-btn v-btn--icon v-theme--dark v-btn--density-compact v-btn--size-default v-btn--variant-text mr-2" title="Clear Path History">
                    <i class="mdi mdi-eraser v-icon notranslate v-theme--dark v-icon--size-default"></i>
                </button>
                <button id="importKml" class="v-btn v-btn--icon v-theme--dark v-btn--density-compact v-btn--size-default v-btn--variant-text mr-2" title="Import KML File">
                    <i class="mdi mdi-file-import v-icon notranslate v-theme--dark v-icon--size-default"></i>
                </button>
                <button id="toggleTargetContainer" class="v-btn v-btn--icon v-theme--dark v-btn--density-compact v-btn--size-default v-btn--variant-text add-new-target" title="Toggle Targets Panel">
                    <i class="mdi mdi-chevron-up v-icon notranslate v-theme--dark v-icon--size-default" id="targetChevron"></i>
                </button>
                <input type="file" id="kmlFileInput" style="display: none;" accept=".kml" />
            </div>
        </div>

        <!-- Target container section -->
        <div id="targetContainer">
            <!-- New Target Input -->
            <div id="newTargetInput" class="target-input-group">
                <div class="v-input v-input--horizontal v-input--center-affix v-input--density-compact v-theme--light v-text-field">
                    <div class="v-input__control">
                        <div class="v-field v-field--active v-field--center-affix v-field--variant-outlined v-theme--light">
                            <div class="v-field__overlay"></div>
                            <div class="v-field__field" data-no-activator="">
                                <label class="v-label v-field-label">New Target</label>
                                <input type="text" class="v-field__input newTargetCoords" autocomplete="off" placeholder="lat, lon">
                            </div>
                            <div class="v-field__outline">
                                <div class="v-field__outline__start"></div>
                                <div class="v-field__outline__notch">
                                    <label class="v-label v-field-label v-field-label--floating">New Target</label>
                                </div>
                                <div class="v-field__outline__end"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" class="v-btn v-btn--icon v-theme--dark v-btn--density-compact v-btn--size-default v-btn--variant-text add-new-target">
                    <i class="mdi-plus mdi v-icon notranslate v-theme--dark v-icon--size-default"></i>    
                </button>
            </div>

            <!-- KML File Import Section -->
            <div id="kmlFileRow" class="kml-file-row" style="display: none; margin-top: 8px;">
                <div class="flex-between" style="margin-bottom: 8px;">
                    <div id="kmlFileName" class="kml-file-name" style="display: flex; align-items: center;">
                        <i class="mdi mdi-file-document-outline v-icon notranslate v-theme--dark v-icon--size-default mr-2"></i>
                        <span>No file selected</span>
                    </div>
                    <button id="closeKmlFile" class="v-btn v-btn--icon v-theme--dark v-btn--density-compact v-btn--size-default v-btn--variant-text">
                        <i class="mdi mdi-trash-can v-icon notranslate v-theme--dark v-icon--size-default"></i>
                    </button>
                </div>
                <select id="waypointSelect" class="flex items-center justify-center w-full py-1 pl-2 pr-8 text-base transition-all border-0 rounded-md shadow-inner cursor-pointer h-9 bg-slate-800/60 text-slate-100 hover:bg-slate-600/60" style="width: 100%;">
                    <option value="" disabled selected>Select a waypoint</option>
                </select>
            </div>

            <!-- Added Targets Container -->
            <div id="addedTargetsContainer"></div>
            
        </div>
    </div>
    
    <!-- Map Container -->
    <div id="mapContainer">
        <canvas id="mapCanvas"></canvas>
        <div class="d-flex flex-column map-controls">
            <button id="toggleViewMode" class="v-btn v-btn--icon v-theme--dark v-btn--density-default v-btn--size-large v-btn--variant-text" title="Toggle View Mode">
                <i class="mdi mdi-compass v-icon notranslate v-theme--dark v-icon--size-large"></i>
            </button>
            <button id="recenterROV" class="v-btn v-btn--icon v-theme--dark v-btn--density-default v-btn--size-large v-btn--variant-text" title="Recenter ROV">
                <i class="mdi mdi-crosshairs-gps v-icon notranslate v-theme--dark v-icon--size-large"></i>
            </button>
        </div>
    </div>
</div>